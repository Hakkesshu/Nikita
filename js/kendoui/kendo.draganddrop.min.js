/*
* Kendo UI Complete v2012.1.423 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(a,b){function J(a,b){return a.replace(/ /g,b+" ")}function I(a){return f.elementFromPoint(a.x.client,a.y.client)}function H(b,c){try{return a.contains(b,c)||b==c}catch(d){return!1}}var c=window.kendo,d=c.support,e=d.pointers,f=window.document,g=a(f.documentElement),h=c.Class,i=c.ui.Widget,j=c.Observable,k=a.proxy,l=a.extend,m=c.getOffset,n={},o={},p,q="resize",r="mousedown",s="mousemove",t="mouseup mouseleave",u="keyup",v="dragstart",w="drag",x="dragend",y="dragcancel",z="dragenter",A="dragleave",B="drop",C="start",D="move",E="end",F="cancel",G="tap";d.touch&&(q="orientationchange",r="touchstart",s="touchmove",t="touchend touchcancel"),e&&(q="orientationchange resize",r="MSPointerDown",s="MSPointerMove",t="MSPointerUp MSPointerCancel");var K=h.extend({init:function(a){this.axis=a},start:function(a,b){var c=this,d=a["page"+c.axis];c.startLocation=c.location=d,c.client=a["client"+c.axis],c.velocity=c.delta=0,c.timeStamp=b},move:function(a,b){var c=this,d=a["page"+c.axis];!d||(c.delta=d-c.location,c.location=d,c.client=a["client"+c.axis],c.initialDelta=d-c.startLocation,c.velocity=c.delta/(b-c.timeStamp),c.timeStamp=b)}}),L=j.extend({init:function(b,e){var f=this,h={},i,m,n="."+c.guid();e=e||{},i=f.filter=e.filter,f.threshold=e.threshold||0,b=a(b),j.fn.init.call(f),h={},h[J(s,n)]=k(f._move,f),h[J(t,n)]=k(f._end,f),l(f,{x:new K("X"),y:new K("Y"),element:b,surface:e.global?g:b,pressed:!1,eventMap:h,ns:n}),b.on(r,i,k(f._start,f)).on("dragstart",i,c.preventDefault),!e.allowSelection&&i&&i.length&&b.on("mousedown selectstart",i,null,c.preventDefault),d.eventCapture&&(m=function(a){f.moved&&a.preventDefault()},f.surface[0].addEventListener(d.mouseup,m,!0)),f.bind([G,C,D,E,F],e)},capture:function(){L.captured=!0},cancel:function(){this._cancel(),this.trigger(F)},_cancel:function(){this.pressed=!1,this.surface.off(this.ns)},_start:function(b){var c=this,f=c.filter,g=b.originalEvent,h,i=b;if(!c.pressed){f?c.target=a(b.target).is(f)?a(b.target):a(b.target).closest(f):c.target=c.element;if(!c.target.length)return;c.pressed=!0,c.moved=!1,d.touch&&(h=g.changedTouches[0],c.touchID=h.identifier,i=h),e&&(c.touchID=g.pointerId,i=g),c._perAxis(C,i,b.timeStamp),c.surface.off(c.eventMap).on(c.eventMap),L.captured=!1}},_move:function(a){var b=this,c,d,e;!b.pressed||b._withEvent(a,function(f){b._perAxis(D,f,a.timeStamp);if(!b.moved){c=b.x.initialDelta,d=b.y.initialDelta,e=Math.sqrt(c*c+d*d);if(e<=b.threshold)return;if(!L.captured)b._trigger(C,a),b.moved=!0;else return b._cancel()}b.pressed&&b._trigger(D,a)})},_end:function(a){var b=this;!b.pressed||b._withEvent(a,function(){b._cancel(),b.moved?(b._trigger(E,a),b.moved=!1):b._trigger(G,a)})},_perAxis:function(a,b,c){this.x[a](b,c),this.y[a](b,c)},_trigger:function(a,b){var c={x:this.x,y:this.y,target:this.target,event:b};this.trigger(a,c)&&b.preventDefault()},_withEvent:function(a,b){var c=this,f=c.touchID,g=a.originalEvent,h,i;if(d.touch){h=g.changedTouches,i=h.length;while(i){i--;if(h[i].identifier===f)return b(h[i])}}else{if(!e)return b(a);if(f===g.pointerId)return b(g)}}}),M=j.extend({init:function(a,b){var c=this;c.capture=!1,a[0].addEventListener(r,k(c._press,c),!0),a.on(t,k(c._release,c)),j.fn.init.call(c),c.bind(["press","release"],b||{})},_press:function(a){var b=this;b.trigger("press"),b.capture&&(a.preventDefault(),a.originalEvent&&a.originalEvent.preventDefault())},_release:function(a){var b=this;b.trigger("release"),b.capture&&(a.preventDefault(),a.originalEvent&&a.originalEvent.preventDefault(),b.cancelCapture())},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1}}),N=j.extend({init:function(b){var c=this;j.fn.init.call(c),a.extend(c,b),c.max=0,c.horizontal?(c.measure="width",c.scrollSize="scrollWidth",c.axis="x"):(c.measure="height",c.scrollSize="scrollHeight",c.axis="y")},outOfBounds:function(a){return a>this.max||a<this.min},totalSize:function(){return this.element[0][this.scrollSize]},present:function(){return this.max-this.min},update:function(){var a=this;a.size=a.container[a.measure](),a.total=a.element[0][a.scrollSize],a.min=Math.min(a.max,a.size-a.total),a.trigger("change",a)}}),O=h.extend({init:function(b){var c=this;c.x=new N(l({horizontal:!0},b)),c.y=new N(l({horizontal:!1},b)),a(window).bind(q,k(c.refresh,c))},refresh:function(){this.x.update(),this.y.update()}}),P=j.extend({init:function(a){var b=this;l(b,a),j.fn.init.call(b)},dragMove:function(a){var b=this,c=b.dimension,d=b.axis,e=b.movable,f=e[d]+a;if(!!c.present()){if(f<c.min&&a<0||f>c.max&&a>0)a*=b.resistance;e.translateAxis(d,a),b.trigger("change",b)}}}),Q=h.extend({init:function(a){var b=this,c,d,e;l(b,{elastic:!0},a),e=b.elastic?.5:0,b.x=c=new P({axis:"x",dimension:b.dimensions.x,resistance:e,movable:b.movable}),b.y=d=new P({axis:"y",dimension:b.dimensions.y,resistance:e,movable:b.movable}),b.drag.bind(["move","end"],{move:function(a){if(c.dimension.present()||d.dimension.present())c.dragMove(a.x.delta),d.dragMove(a.y.delta),a.preventDefault()},end:function(a){a.preventDefault()}})}}),R=d.transitions.prefix+"Transform",S=Math.round,T;d.hasHW3D?T=function(a,b){return"translate3d("+S(a)+"px,"+S(b)+"px,0)"}:T=function(a,b){return"translate("+S(a)+"px,"+S(b)+"px)"};var U=j.extend({init:function(b){var c=this;j.fn.init.call(c),c.element=a(b),c.x=0,c.y=0,c._saveCoordinates(T(c.x,c.y))},translateAxis:function(a,b){this[a]+=b,this.refresh()},translate:function(a){this.x+=a.x,this.y+=a.y,this.refresh()},moveAxis:function(a,b){this[a]=b,this.refresh()},moveTo:function(a){l(this,a),this.refresh()},refresh:function(){var a=this,b=T(a.x,a.y);b!=a.coordinates&&(a.element[0].style[R]=b,a._saveCoordinates(b),a.trigger("change"))},_saveCoordinates:function(a){this.coordinates=a}}),V=i.extend({init:function(a,b){var c=this;i.fn.init.call(c,a,b);var d=c.options.group;d in o?o[d].push(c):o[d]=[c]},events:[z,A,B],options:{name:"DropTarget",group:"default"},_trigger:function(a,b){var c=this,d=n[c.options.group];if(d)return c.trigger(a,l({},b.event,{draggable:d}))},_over:function(a){this._trigger(z,a)},_out:function(a){this._trigger(A,a)},_drop:function(a){var b=this,c=n[b.options.group];c&&(c.dropped=!b._trigger(B,a))}}),W=i.extend({init:function(a,b){var d=this;i.fn.init.call(d,a,b),d.drag=new L(d.element,{global:!0,filter:d.options.filter,threshold:d.options.distance,start:k(d._start,d),move:k(d._drag,d),end:k(d._end,d),cancel:k(d._cancel,d)}),d.destroy=k(d._destroy,d),d.captureEscape=function(a){a.keyCode===c.keys.ESC&&(d._trigger(y,{event:a}),d.drag.cancel())}},events:[v,w,x,y],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,dropped:!1},_start:function(b){var c=this,d=c.options,e=d.hint;c.currentTarget=c.drag.target,c.currentTargetOffset=m(c.currentTarget);if(e){c.hint=a.isFunction(e)?a(e(c.currentTarget)):e;var g=m(c.currentTarget);c.hintOffset=g,c.hint.css({position:"absolute",zIndex:2e4,left:g.x,top:g.y}).appendTo(f.body)}n[d.group]=c,c.dropped=!1,c._trigger(v,b)&&(c.drag.cancel(),c.destroy()),a(f).on(u,c.captureEscape)},updateHint:function(a){var b=this,c,d=b.options.cursorOffset;d?c={left:a.x.location+d.left,top:a.y.location+d.top}:(b.hintOffset.left+=a.x.delta,b.hintOffset.top+=a.y.delta,c=b.hintOffset),b.hint.css(c)},_drag:function(a){var b=this;a.preventDefault(),b._withDropTarget(a,function(b){if(!b)p&&(p._trigger(A,a),p=null);else{if(p){if(b.element[0]===p.element[0])return;p._trigger(A,a)}b._trigger(z,a),p=b}}),b._trigger(w,a),b.hint&&b.updateHint(a)},_end:function(a){var b=this;b._withDropTarget(a,function(b){b&&(b._drop(a),p=null)}),b._trigger(x,a),b._cancel(a.event)},_cancel:function(a){var b=this;b.hint&&!b.dropped?b.hint.animate(b.currentTargetOffset,"fast",b.destroy):b.destroy()},_trigger:function(a,b){var c=this;return c.trigger(a,l({},b.event,{x:b.x,y:b.y,currentTarget:c.currentTarget}))},_withDropTarget:function(b,c){var d=this,e,f,g=d.options,h=o[g.group];h&&h.length&&(e=I(b),d.hint&&H(d.hint,e)&&(d.hint.hide(),e=I(b),d.hint.show()),a.each(h,function(){var a=this,b=a.element[0];if(H(b,e)){f=a;return!1}}),c(f))},_destroy:function(){var b=this;b.hint&&b.hint.remove(),delete n[b.options.group],b.trigger("destroy"),a(f).off(u,b.captureEscape)}});c.ui.plugin(V),c.ui.plugin(W),c.Drag=L,c.Tap=M,l(c.ui,{Pane:Q,PaneDimensions:O,Movable:U})})(jQuery)